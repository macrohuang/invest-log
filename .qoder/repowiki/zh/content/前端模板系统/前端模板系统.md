# 前端模板系统

<cite>
**本文档引用的文件**
- [app.py](file://app.py)
- [routers/utils.py](file://routers/utils.py)
- [routers/overview.py](file://routers/overview.py)
- [routers/holdings.py](file://routers/holdings.py)
- [routers/transactions.py](file://routers/transactions.py)
- [routers/settings.py](file://routers/settings.py)
- [database.py](file://database.py)
- [templates/base.html](file://templates/base.html)
- [templates/index.html](file://templates/index.html)
- [templates/holdings.html](file://templates/holdings.html)
- [templates/transactions.html](file://templates/transactions.html)
- [templates/charts.html](file://templates/charts.html)
- [templates/settings.html](file://templates/settings.html)
- [templates/add.html](file://templates/add.html)
- [templates/symbol.html](file://templates/symbol.html)
- [static/style.css](file://static/style.css)
</cite>

## 更新摘要
**变更内容**
- 新增标签页支持系统，实现多币种持仓的标签页切换
- 集成隐私模式功能，支持敏感信息的遮罩显示
- 实现交互式图表系统，使用Chart.js提供丰富的可视化体验
- 重构CSS设计系统，采用现代化的卡片布局和响应式设计
- 增强交互功能，包括模态框、切换开关、自动更新等
- 优化移动端适配，提供更好的跨设备体验

## 目录
1. [简介](#简介)
2. [项目结构](#项目结构)
3. [核心组件](#核心组件)
4. [架构总览](#架构总览)
5. [详细组件分析](#详细组件分析)
6. [标签页系统](#标签页系统)
7. [隐私模式功能](#隐私模式功能)
8. [交互式图表系统](#交互式图表系统)
9. [现代化UI设计](#现代化ui设计)
10. [依赖关系分析](#依赖关系分析)
11. [性能考量](#性能考量)
12. [故障排查指南](#故障排查指南)
13. [结论](#结论)
14. [附录](#附录)

## 简介
本文件系统性地解析投资日志管理系统的Jinja2模板体系，覆盖模板继承机制、页面模板功能与数据绑定、条件显示与循环处理、静态资源与样式集成、JavaScript脚本嵌入、响应式设计与跨浏览器兼容性、性能优化策略，以及模板自定义与最佳实践。经过重大升级，系统现已支持标签页切换、隐私模式、交互式图表和现代化UI设计，为用户提供更加丰富和直观的投资管理体验。

## 项目结构
系统采用FastAPI + Jinja2模板的后端渲染架构：路由层负责业务逻辑与数据查询，模板层负责页面渲染，静态资源通过FastAPI挂载提供。新增的标签页系统、隐私模式和交互式图表功能进一步增强了用户体验。

```mermaid
graph TB
A["app.py<br/>应用入口与静态资源挂载"] --> B["routers/utils.py<br/>Jinja2模板实例"]
B --> C["routers/overview.py<br/>首页与图表路由"]
B --> D["routers/holdings.py<br/>持仓详情与符号详情路由"]
B --> E["routers/transactions.py<br/>交易列表与新增交易路由"]
B --> F["routers/settings.py<br/>设置页路由"]
C --> G["templates/base.html<br/>基础布局"]
D --> G
E --> G
F --> G
G --> H["templates/index.html<br/>主页概览"]
G --> I["templates/holdings.html<br/>持仓详情"]
G --> J["templates/transactions.html<br/>交易记录"]
G --> K["templates/charts.html<br/>图表展示"]
G --> L["templates/settings.html<br/>设置页面"]
G --> M["templates/add.html<br/>新增交易"]
G --> N["templates/symbol.html<br/>符号详情"]
A --> O["static/style.css<br/>现代化样式与响应式规则"]
O --> P["标签页样式<br/>隐私模式样式<br/>交互式图表样式"]
```

**图示来源**
- [app.py](file://app.py#L1-L34)
- [routers/utils.py](file://routers/utils.py#L1-L4)
- [routers/overview.py](file://routers/overview.py#L1-L28)
- [routers/holdings.py](file://routers/holdings.py#L1-L255)
- [routers/transactions.py](file://routers/transactions.py#L1-L75)
- [routers/settings.py](file://routers/settings.py#L1-L180)
- [templates/base.html](file://templates/base.html#L1-L27)
- [static/style.css](file://static/style.css#L1-L1104)

**章节来源**
- [app.py](file://app.py#L1-L34)
- [routers/utils.py](file://routers/utils.py#L1-L4)

## 核心组件
- 模板引擎与目录
  - 使用Jinja2Templates加载模板目录，统一由路由层调用渲染。
- 静态资源
  - FastAPI挂载静态目录，模板中通过相对路径引用CSS与CDN脚本。
- 数据绑定
  - 路由函数从数据库模块查询数据，传入模板上下文；模板使用变量、过滤器与控制结构进行渲染。
- 导航与布局
  - base.html提供导航栏与内容块占位，各页面通过extends继承并填充content块。
- **新增** 标签页系统
  - 支持多币种持仓的标签页切换，提供更好的数据组织和用户体验。
- **新增** 隐私模式
  - 可选的隐私保护功能，支持敏感信息的遮罩显示。
- **新增** 交互式图表
  - 集成Chart.js库，提供丰富的可视化图表功能。

**章节来源**
- [routers/utils.py](file://routers/utils.py#L1-L4)
- [app.py](file://app.py#L15-L16)
- [templates/base.html](file://templates/base.html#L1-L27)

## 架构总览
模板系统围绕"基础布局 + 页面模板"的继承模型展开，路由层负责数据准备，模板层负责UI呈现与交互。新增的标签页系统、隐私模式和交互式图表功能进一步增强了系统的功能性和用户体验。

```mermaid
sequenceDiagram
participant U as "用户"
participant R as "路由处理器"
participant DB as "数据库模块"
participant T as "Jinja2模板"
participant B as "浏览器"
U->>R : 请求页面URL
R->>DB : 查询所需数据
DB-->>R : 返回数据集
R->>T : 渲染模板(传入上下文)
T-->>R : HTML字符串
R-->>B : 返回HTTP响应
Note over B : 新增标签页切换<br/>隐私模式切换<br/>图表交互
```

**图示来源**
- [routers/overview.py](file://routers/overview.py#L8-L27)
- [routers/holdings.py](file://routers/holdings.py#L13-L100)
- [routers/transactions.py](file://routers/transactions.py#L10-L43)
- [routers/settings.py](file://routers/settings.py#L11-L61)
- [database.py](file://database.py#L158-L200)

## 详细组件分析

### 基础布局与导航（base.html）
- 继承机制
  - 子模板通过extends继承base.html，重写title与content块。
- 导航高亮
  - 通过请求路径判断当前活动页签，动态添加active类。
- 资源引用
  - 引入本地样式与Chart.js CDN脚本，确保图表渲染可用。
- 内容占位
  - main区域使用block content作为子模板插入点。

**章节来源**
- [templates/base.html](file://templates/base.html#L1-L27)

### 主页概览（index.html）
- 功能概述
  - 展示按货币分组的持仓概览，包含小计、分配条与警告提示。
- 数据绑定
  - 接收holdings_by_currency与资产类型标签映射，用于渲染图表与文本。
- 条件与循环
  - 当存在数据时渲染卡片网格；对每种货币渲染一个环形图；对分配项进行过滤与范围标注。
- **新增** 隐私模式
  - 支持隐私模式切换，敏感信息可被遮罩显示。
- **新增** 交互式图表
  - 将数据转为JSON传递给JavaScript，使用Chart.js绘制多色环形图。
- 空状态
  - 无数据时显示引导信息与跳转链接。

```mermaid
flowchart TD
Start(["进入主页"]) --> CheckData{"是否存在按货币分组的持仓数据？"}
CheckData --> |否| Empty["显示空状态提示"]
CheckData --> |是| PrivacyMode["检查隐私模式状态"]
PrivacyMode --> RenderCards["渲染货币卡片网格"]
RenderCards --> LoopCurrency["遍历每种货币"]
LoopCurrency --> RenderCard["渲染货币卡片与图表容器"]
RenderCard --> LoopAlloc["遍历分配项"]
LoopAlloc --> FilterAmt{"amount > 0 或存在警告？"}
FilterAmt --> |否| NextAlloc["下一个分配项"]
FilterAmt --> |是| RenderBar["渲染百分比条与范围条"]
RenderBar --> NextAlloc
NextAlloc --> Done{"遍历结束？"}
Done --> |否| LoopAlloc
Done --> |是| InitChart["初始化Chart.js环形图"]
InitChart --> End(["完成"])
```

**图示来源**
- [templates/index.html](file://templates/index.html#L8-L82)

**章节来源**
- [templates/index.html](file://templates/index.html#L1-L148)

### 持仓详情（holdings.html）
- 功能概述
  - 展示按货币分组的明细表格，支持自动/手动价格更新与快捷交易。
- 数据绑定
  - 接收按符号分组的持仓数据、资产类型标签、货币列表与消息参数。
- **新增** 标签页系统
  - 按货币创建标签页，支持多币种持仓的分页显示。
- 表格渲染
  - 表头包含关键指标；行内计算成本、市值、未实现盈亏与百分比。
- **新增** 增强交互功能
  - 自动更新：触发异步请求更新最新价并刷新页面。
  - 手动更新：弹出模态框输入价格并提交。
  - 快捷交易：弹出模态框填写交易类型、数量、价格等，提交后重定向到持仓页。
  - 切换开关：支持符号的自动更新开关。
- 消息提示
  - 支持成功/错误消息的显示与关闭按钮。

```mermaid
sequenceDiagram
participant U as "用户"
participant P as "持仓页"
participant S as "服务器"
participant DB as "数据库"
U->>P : 点击"自动更新"
P->>S : POST /holdings/update-price
S->>DB : 更新最新价格
DB-->>S : 成功/失败
S-->>U : 重定向带消息参数
U->>P : 刷新页面
P-->>U : 显示成功/错误消息
Note over P : 新增标签页切换<br/>隐私模式支持<br/>模态框交互
```

**图示来源**
- [routers/holdings.py](file://routers/holdings.py#L102-L148)
- [templates/holdings.html](file://templates/holdings.html#L187-L266)

**章节来源**
- [templates/holdings.html](file://templates/holdings.html#L1-L347)
- [routers/holdings.py](file://routers/holdings.py#L13-L100)

### 交易记录（transactions.html）
- 功能概述
  - 分页展示交易历史，支持删除操作与快速跳转。
- 数据绑定
  - 接收交易列表、总数、当前页与总页数。
- 分页逻辑
  - 计算总页数并在视图中渲染页码区间与首尾页链接。
- **新增** 增强交互**
  - 通过fetch调用API删除交易，删除成功后刷新页面。
- **新增** 现代化UI**
  - 采用卡片布局和现代化的表格样式。

```mermaid
flowchart TD
Enter(["进入交易页"]) --> LoadData["加载交易数据与分页参数"]
LoadData --> RenderTable["渲染现代化表格与徽章"]
RenderTable --> HasPages{"是否多于1页？"}
HasPages --> |否| End(["完成"])
HasPages --> |是| RenderPager["渲染页码区间与导航"]
RenderPager --> Delete["点击删除按钮"]
Delete --> Confirm{"确认删除？"}
Confirm --> |否| End
Confirm --> |是| CallAPI["调用DELETE /api/transactions/:id"]
CallAPI --> Result{"返回状态"}
Result --> |ok| Reload["刷新页面"]
Result --> |error| Alert["提示失败"]
Reload --> End
Alert --> End
```

**图示来源**
- [templates/transactions.html](file://templates/transactions.html#L53-L89)

**章节来源**
- [templates/transactions.html](file://templates/transactions.html#L1-L91)
- [routers/transactions.py](file://routers/transactions.py#L10-L28)

### 图表展示（charts.html）
- 功能概述
  - 按货币展示各符号的市场价值占比环形图。
- 数据绑定
  - 接收按符号分组的持仓数据与资产类型标签映射。
- **新增** 隐私模式
  - 支持隐私模式切换，敏感信息可被遮罩显示。
- **新增** 交互式图表
  - 使用Chart.js绘制环形图，启用工具提示以显示百分比。
- **新增** 账户分组
  - 按账户维度展示符号分布，提供更详细的图表信息。
- 空状态
  - 无数据时显示引导信息与跳转链接。

**章节来源**
- [templates/charts.html](file://templates/charts.html#L1-L182)
- [routers/overview.py](file://routers/overview.py#L19-L27)

### 设置页面（settings.html）
- 功能概述
  - 提供四类设置：资产配置区间、账户管理、资产类型管理、数据库设置。
- 数据绑定
  - 接收货币列表、资产类型、账户列表、设置映射与消息参数。
- **新增** 标签页系统
  - 使用JavaScript切换选项卡并更新URL参数，无需刷新。
- **新增** 增强表单功能
  - 分别处理保存配置、新增/删除资产类型、新增/删除账户。
- **新增** 数据库设置
  - 支持数据库文件名配置和iCloud同步设置。

```mermaid
sequenceDiagram
participant U as "用户"
participant P as "设置页"
participant S as "服务器"
participant DB as "数据库"
U->>P : 点击选项卡
P->>P : 切换选项卡并更新URL
U->>P : 提交配置表单
P->>S : POST /settings
S->>DB : 更新配置
DB-->>S : 成功
S-->>U : 重定向带成功消息
Note over P : 新增标签页切换逻辑<br/>隐私模式支持<br/>现代化表单样式
```

**图示来源**
- [templates/settings.html](file://templates/settings.html#L181-L200)
- [routers/settings.py](file://routers/settings.py#L63-L86)

**章节来源**
- [templates/settings.html](file://templates/settings.html#L1-L266)
- [routers/settings.py](file://routers/settings.py#L11-L61)

### 新增交易（add.html）
- 功能概述
  - 提供交易录入表单，支持根据交易类型动态调整字段与符号选择。
- 数据绑定
  - 接收账户列表、资产类型、货币列表与现有持仓数据。
- **新增** 动态交互
  - 根据交易类型切换符号输入方式（输入框或下拉），并联动价格与币种影响总额预览。
- **新增** 符号筛选
  - 基于资产类型与币种过滤唯一符号集合，填充datalist与select。
- **新增** 总额计算
  - 数量与价格变化实时计算总额并以货币符号前缀显示。
- **新增** 现代化表单设计
  - 采用卡片布局和现代化的表单样式。

**章节来源**
- [templates/add.html](file://templates/add.html#L1-L259)
- [routers/transactions.py](file://routers/transactions.py#L30-L43)

### 符号详情（symbol.html）
- 功能概述
  - 展示指定符号的持有摘要与交易历史，支持年份筛选。
- 数据绑定
  - 接收符号、币种、持有信息、交易列表、年份列表与选中年份。
- **新增** 价值调整
  - 提供调整总价值的表单，支持备注。
- **新增** 年份筛选
  - 渲染年份按钮，点击切换年份并保留查询参数。
- **新增** 现代化布局
  - 采用卡片布局和现代化的摘要展示。

**章节来源**
- [templates/symbol.html](file://templates/symbol.html#L1-L105)
- [routers/holdings.py](file://routers/holdings.py#L32-L76)

## 标签页系统
系统实现了完整的标签页切换功能，主要应用于持仓详情和设置页面：

### 持仓详情标签页
- **多币种支持**：按货币创建独立标签页，支持同时查看多种货币的持仓情况
- **状态持久化**：使用localStorage保存用户选择的标签页，页面刷新后自动恢复
- **动态切换**：点击标签页按钮即可切换显示内容，无需页面刷新
- **样式设计**：采用现代化的标签页样式，支持悬停效果和激活状态

### 设置页面标签页
- **功能分区**：将设置功能分为配置、账户、资产类型、数据库四个独立标签
- **URL同步**：切换标签页时更新URL参数，支持书签和分享
- **内容隔离**：每个标签页的内容完全独立，互不影响

**章节来源**
- [templates/holdings.html](file://templates/holdings.html#L16-L20)
- [templates/holdings.html](file://templates/holdings.html#L279-L287)
- [templates/settings.html](file://templates/settings.html#L15-L20)
- [templates/settings.html](file://templates/settings.html#L246-L264)

## 隐私模式功能
隐私模式是系统的重要安全特性，为用户提供敏感信息保护：

### 功能特性
- **一键切换**：页面右上角提供隐私模式切换按钮
- **状态持久化**：使用localStorage保存用户偏好设置
- **图标反馈**：根据隐私模式状态显示不同的眼睛图标
- **信息遮罩**：在隐私模式下，敏感金额信息显示为星号

### 技术实现
- **CSS类控制**：通过body元素的privacy-mode类控制显示状态
- **JavaScript逻辑**：使用localStorage存储用户偏好
- **SVG图标**：动态切换眼睛图标以提供视觉反馈
- **响应式设计**：在不同屏幕尺寸下保持一致的用户体验

### 隐私保护范围
- 货币金额显示（总价值、单项金额等）
- 用户可选择性遮罩敏感信息
- 支持临时隐私模式，适合在公共场合使用

**章节来源**
- [templates/index.html](file://templates/index.html#L29-L105)
- [templates/charts.html](file://templates/charts.html#L29-L132)
- [static/style.css](file://static/style.css#L1043-L1074)

## 交互式图表系统
系统集成了完整的交互式图表功能，使用Chart.js库提供丰富的可视化体验：

### 图表类型
- **环形图（Doughnut）**：用于展示资产配置比例
- **工具提示**：显示精确的百分比和数值信息
- **响应式设计**：图表会根据容器大小自动调整
- **颜色主题**：为不同资产类型提供统一的颜色标识

### 数据处理
- **动态数据绑定**：将Python数据结构转换为JavaScript可识别的JSON格式
- **实时更新**：支持图表数据的动态更新和重新渲染
- **错误处理**：对空数据和无效数据进行适当的处理

### 用户交互
- **悬停效果**：鼠标悬停时显示详细信息
- **点击交互**：支持图表元素的点击交互（如符号详情跳转）
- **缩放适配**：支持移动端触摸手势

### 图表布局
- **网格布局**：多个图表采用CSS Grid布局，自动适应屏幕尺寸
- **卡片设计**：每个图表嵌套在卡片容器中，提供统一的视觉风格
- **标题和总计**：每个图表都有清晰的标题和总计信息

**章节来源**
- [templates/index.html](file://templates/index.html#L116-L139)
- [templates/charts.html](file://templates/charts.html#L140-L174)
- [static/style.css](file://static/style.css#L236-L248)

## 现代化UI设计
系统采用了全新的现代化设计语言，提供统一而美观的用户界面：

### 设计原则
- **卡片布局**：大量使用卡片容器，提供层次化的信息组织
- **网格系统**：采用CSS Grid和Flexbox实现灵活的布局
- **响应式设计**：适配各种屏幕尺寸，从手机到桌面设备
- **一致性**：统一的颜色方案、字体和间距规范

### 样式特色
- **渐变背景**：使用渐变色创建现代感的视觉效果
- **阴影系统**：通过阴影营造立体感和层次感
- **圆角设计**：统一的圆角半径，提供柔和的视觉感受
- **动画过渡**：平滑的过渡效果，提升用户体验

### 组件设计
- **按钮系统**：提供多种样式的按钮，支持不同状态
- **表单设计**：现代化的表单控件，支持焦点状态和验证反馈
- **表格样式**：清晰的数据表格，支持悬停和交互效果
- **模态框**：居中的模态框，支持遮罩层和关闭功能

### 色彩系统
- **主色调**：蓝色系作为主要品牌色彩
- **辅助色彩**：绿色、橙色、紫色等用于不同状态和类型
- **状态色彩**：红色用于错误，绿色用于成功，蓝色用于信息
- **中性色彩**：灰色系用于背景和文字

**章节来源**
- [static/style.css](file://static/style.css#L1-L12)
- [static/style.css](file://static/style.css#L62-L81)
- [static/style.css](file://static/style.css#L83-L113)
- [static/style.css](file://static/style.css#L146-L181)

## 依赖关系分析
- 应用启动与静态资源
  - 应用启动时初始化数据库，挂载静态资源目录，路由模块统一使用Jinja2模板实例。
- 路由到模板
  - 各路由模块从数据库模块读取数据，构造上下文并渲染对应模板。
- 模板到样式
  - base.html引入本地样式文件，配合媒体查询实现响应式布局。
- **新增** Chart.js集成
  - 所有图表页面都集成了Chart.js库，提供丰富的可视化功能。

```mermaid
graph LR
App["app.py"] --> Mount["挂载静态资源"]
App --> Routers["路由模块"]
Routers --> DB["database.py"]
Routers --> Templates["Jinja2模板"]
Templates --> Base["base.html"]
Base --> Styles["static/style.css"]
Styles --> Charts["Chart.js集成"]
Styles --> Tabs["标签页系统"]
Styles --> Privacy["隐私模式"]
```

**图示来源**
- [app.py](file://app.py#L15-L29)
- [routers/utils.py](file://routers/utils.py#L1-L4)
- [database.py](file://database.py#L22-L151)
- [templates/base.html](file://templates/base.html#L7-L8)
- [static/style.css](file://static/style.css#L1-L1104)

**章节来源**
- [app.py](file://app.py#L1-L34)
- [routers/utils.py](file://routers/utils.py#L1-L4)
- [database.py](file://database.py#L1-L200)

## 性能考量
- 模板渲染
  - 控制循环与条件分支，避免在模板中执行复杂计算；将计算逻辑前置到路由层。
- **新增** 图表性能
  - 仅在存在有效数据时初始化Chart.js实例，减少不必要的DOM与脚本开销。
  - 使用响应式图表配置，避免固定尺寸导致的重绘问题。
- 静态资源
  - 使用CDN加载Chart.js，减少本地带宽占用；CSS采用媒体查询实现响应式，降低额外脚本依赖。
- 分页与数据量
  - 交易列表采用分页，限制单页数据量，提升首屏渲染速度。
- 缓存与复用
  - 在路由层缓存资产类型标签映射等只读数据，减少重复查询。
- **新增** 本地存储优化
  - 使用localStorage存储用户偏好设置，减少服务器请求。
- **新增** 按需加载
  - 标签页和隐私模式功能按需加载，避免不必要的JavaScript执行。

## 故障排查指南
- 模板无法找到
  - 确认Jinja2Templates目录设置正确，且模板文件位于templates目录。
- 导航高亮异常
  - 检查请求路径匹配逻辑，确保与导航链接路径一致。
- **新增** 标签页切换失效
  - 检查JavaScript函数是否正确加载，确认localStorage访问权限。
- **新增** 隐私模式不工作
  - 检查localStorage功能是否可用，确认CSS类切换逻辑。
- 图表不显示
  - 确认数据已传递至模板并转换为JSON；检查Chart.js是否成功加载。
- **新增** 交互功能异常
  - 检查事件监听器绑定是否正确，确认异步操作的Promise处理。
- 设置页选项卡状态不同步
  - 检查JavaScript切换逻辑与URL参数更新，确保事件绑定正确。

**章节来源**
- [templates/base.html](file://templates/base.html#L14-L20)
- [templates/index.html](file://templates/index.html#L48-L82)
- [templates/transactions.html](file://templates/transactions.html#L82-L89)
- [templates/settings.html](file://templates/settings.html#L181-L200)
- [templates/holdings.html](file://templates/holdings.html#L279-L340)

## 结论
经过重大升级，该模板系统通过清晰的继承结构与路由驱动的数据绑定，实现了从主页概览到交易管理的完整前端体验。新增的标签页系统、隐私模式、交互式图表和现代化UI设计，显著提升了用户体验和系统的功能性。配合响应式样式与轻量级交互，既保证了良好的跨设备体验，也便于后续扩展与维护。建议在新模板开发中遵循现有命名与结构规范，优先在路由层完成数据聚合与格式化，保持模板简洁易读。

## 附录

### 模板数据绑定清单（关键页面）
- 主页概览
  - holdings_by_currency, asset_type_labels, currencies
- 持仓详情
  - holdings_by_symbol, asset_type_labels, currencies, message, message_type
- 交易记录
  - transactions, current_page, total_pages, total_count, per_page
- 图表展示
  - holdings_by_symbol, asset_type_labels
- 设置页面
  - currencies, asset_types, accounts, settings_map, message, message_type, active_tab
- 新增交易
  - accounts, today, currencies, asset_types, holdings
- 符号详情
  - symbol, currency, holding, transactions, selected_year, years, asset_type_labels

**章节来源**
- [routers/overview.py](file://routers/overview.py#L11-L27)
- [routers/holdings.py](file://routers/holdings.py#L19-L30)
- [routers/transactions.py](file://routers/transactions.py#L11-L28)
- [routers/settings.py](file://routers/settings.py#L18-L61)
- [routers/transactions.py](file://routers/transactions.py#L31-L43)
- [routers/holdings.py](file://routers/holdings.py#L32-L76)

### 最佳实践与自定义指南
- 继承与复用
  - 所有页面均应继承base.html，仅在title与content块中定制。
- 数据上下文
  - 路由层负责准备模板所需的所有数据，模板中仅做展示与简单格式化。
- 条件与循环
  - 使用条件判断避免渲染空数据；对列表进行必要的过滤后再传入模板。
- **新增** 标签页设计
  - 使用统一的标签页组件，确保跨页面的一致性。
  - 为标签页内容提供清晰的语义化标记。
- **新增** 隐私模式考虑
  - 为敏感信息提供隐私模式支持，尊重用户的隐私需求。
  - 确保隐私模式切换不会影响核心功能的使用。
- **新增** 图表设计
  - 为图表提供清晰的标题和说明，确保信息传达的有效性。
  - 考虑图表的可访问性，提供替代文本和键盘导航支持。
- 交互与脚本
  - 将JavaScript封装为独立函数，事件绑定放在模板末尾或延迟执行，避免阻塞渲染。
- 样式与响应式
  - 使用CSS Grid/Flexbox与媒体查询适配移动端；避免在模板中硬编码样式。
- 可访问性
  - 为按钮与表单控件提供语义化标签与键盘导航支持。
- 安全性
  - 对用户输入进行校验与清理；在模板中使用安全输出，避免XSS风险。